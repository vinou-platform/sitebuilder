basket:
  template: 'Checkout/basket.twig'
  pageTitle: 'Basket'
  dataProcessing:
    basket: getBasket
    package: getBasketPackage

checkout:
  template: 'Checkout/billing.twig'
  pageTitle: 'Billing'
  method: all
  dataProcessing:
    billing:
      function: loadBilling
      processor: shop
    delivery:
      function: loadDelivery
      processor: shop

checkout/delivery:
  template: 'Checkout/delivery.twig'
  pageTitle: 'Delivery'
  method: all
  dataProcessing:
    billing:
      function: loadBilling
      processor: shop
    delivery:
      function: loadDelivery
      processor: shop

checkout/payment:
  template: 'Checkout/payment.twig'
  pageTitle: 'Payment'
  method: all
  dataProcessing:
    payment:
      function: loadPayment
      processor: shop

checkout/summary:
  template: 'Checkout/summary.twig'
  pageTitle: 'Order summary'
  method: all
  dataProcessing:
    basket: getBasket
    package: getBasketPackage
    billing:
      function: loadBilling
      processor: shop
    delivery:
      function: loadDelivery
      processor: shop
    payment:
      function: loadPayment
      processor: shop
    order:
      function: check
      processor: shop

checkout/finish:
  template: 'Checkout/finish.twig'
  pageTitle: 'Order finished'
  dataProcessing:
    order:
      function: prepareSessionOrder
      processor: shop
    localOrder:
      function: saveOrderJSON
      processor: shop
    addedOrder:
      function: addOrder
      useData: 'localOrder'
    mail:
      function: sendClientNotification
      processor: shop
      useData: 'addedOrder'
    success:
      function: removeSessionData
      processor: shop
      useData: 'mail'